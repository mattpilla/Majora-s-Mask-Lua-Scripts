--"exitrandomizer.lua"
--For use in MM (U) on BizHawk 1.9.1
--Randomizes Exits
 
local entrance = memory.read_u16_be(0x1EF672)
local addresses = {0,16,512,1024,1536,1552,2048,2560,2576,3072,3088,3104,3120,3136,3152,3168,3184,3200,3216,3232,3584,3600,3616,3632,4096,5120,5136,5152,5168,5184,5200,5216,5232,5248,5264,5280,5296,5312,5328,5344,5360,5376,7168,7184,7200,7216,7232,7248,7264,7280,7296,8192,8208,8224,8240,8256,8272,8288,8304,8320,8336,8352,8368,8384,8400,8416,8704,8720,8736,8752,8768,8784,8800,8816,8832,8848,8864,8880,8896,8912,9216,9728,9744,10240,10256,10752,10768,11264,11280,11776,11792,11808,11824,11840,12288,12304,12320,12800,12816,13312,13328,13344,13360,13376,13392,13408,13824,13840,14336,14848,15360,15376,15872,15888,15904,15920,15936,15952,15968,16384,16400,16416,16432,16448,16464,16512,16528,16544,16560,16896,17408,17920,17936,17952,17968,17984,18000,18016,18032,18048,18064,18432,18944,19456,19472,19488,19968,20480,20496,20512,20528,20544,20560,20576,20592,20608,20624,20640,20992,21504,21520,21536,21552,21568,21584,21600,21616,21632,21648,21664,21680,21696,21712,21728,22016,22528,23040,23056,24064,24080,24096,24112,24576,24592,24608,24624,24640,24656,24672,24688,24704,25088,25600,25616,25632,25648,25664,25680,25696,25712,25728,25744,25760,25776,26112,26624,26640,26656,26672,26688,26704,26720,26736,26752,26768,26784,26800,26816,26832,27136,27152,27168,27184,27200,27216,27232,27248,27264,27280,27648,28672,28688,28704,28720,28736,28752,28768,29184,29696,30208,30224,30240,30256,30720,31232,31248,31744,32256,32272,32768,32784,32800,32816,32832,32848,33280,33792,33808,33824,33840,33856,33872,33888,33904,33920,33936,33952,34304,34320,34336,34352,34368,34816,34832,35328,35840,35856,36352,36368,36384,36400,36864,36880,37376,37392,37408,37424,37440,37456,37472,37888,37904,37920,37936,37952,38400,38416,38912,39424,39440,39456,39472,39488,39504,39520,39536,39552,39936,39952,39968,40448,40464,40960,40976,40992,41472,41984,42496,43008,43520,43536,43552,43568,44032,44048,44544,44560,44576,44592,44608,44624,44640,44656,44672,45056,45072,45568,45584,45600,45616,46080,46096,46112,46592,46608,46624,47104,47616,48128,48144,48160,48176,48192,48208,48640,49152,49168,49184,49200,49216,49232,49248,49664,50176,50688,51200,51712,52736,52752,52768,52784,52800,52816,53248,53264,53280,53760,53776,53792,53808,53824,53840,53856,53872,53888,53904,53920,53936,54272,54288,54304,54320,54336,54352,54368,54384,54400,54416,54784,54800,54816,54832,54848,54864,54880,54896,55296,55312,55328,55344,55360,55376,55392,55408,55424,55440,55456,55808,55824,56320}
 
while true do
	if memory.read_u16_be(0x1EF672) ~= entrance then
		memory.write_u16_be(0x1EF672, addresses[math.random(#addresses)])
		entrance = memory.read_u16_be(0x1EF672)
		print(entrance)
	end
	emu.frameadvance()
end